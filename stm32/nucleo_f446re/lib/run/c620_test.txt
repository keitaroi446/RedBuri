#pragma once

#include "c620_can.hpp"
#include "main.h"
#include <cstdio>

extern C620CAN c620;

namespace run
{
    inline void setup()
    {
        c620.setCurrent(1, 1.0f);
    }

    inline void loop()
    {
        c620.sendCurrents();

        const float ang = c620.getAngle(1);
        const float spd = c620.getSpeed(1);
        const float cur = c620.getCurrent(1);
        const float tmp = c620.getTemp(1);

        printf("id1 ang=%.1f spd=%.1f cur=%.2f tmp=%.1f\r\n", ang, spd, cur, tmp);

        HAL_Delay(100);
    }
}
